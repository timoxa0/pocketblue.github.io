---
prev:
    text: 'Supported devices'
    link: '/devices'
next: false
---
### Installing on Xiaomi Pad 5

- **Your current os, all your files, all your custom partitions will be deleted**
- You should have `adb` and `fastboot` installed on your computer
- Download image from [releases](https://github.com/pocketblue/pocketblue/releases/latest)
- Unarchive it
- Boot into fastboot and connect the device to your computer via usb
- Make sure bootloader is unlocked
- If your computer runs linux, run `flash-xiaomi-nabu.sh` script
- If your computer runs windows, run `flash-xiaomi-nabu.cmd` script
- Alternatively, a [manual installation](#manual-installation) is available
- Reboot and enjoy fedora

### Usage

- Default username: `user`
- Default password: `123456`
- [How to upgrade system and install packages](etc/installing-packages.md)

### Manual installation

- Recommended way to install pocketblue is using an installation script, but manual installation is also an option
- Erase dtbo, this required for system to boot
  - `fastboot erase dtbo_ab`
- Flash `vbmeta-disabled.img`, this disables verified boot and also required for system to boot
  - `fastboot flash vbmeta_ab images/vbmeta-disabled.img`
- Flash `uboot.img`, the uefi implementation needed to load grub
  - `fastboot flash boot_ab images/uboot.img`
- Flash `fedora_esp.raw` to `rawdump` partition
  - `fastboot flash rawdump images/fedora_esp.raw`
  - `fedora_esp.raw` - esp partition image
  - `rawdump` - partition meant to dump crash data on qualcomm devices
- Flash `fedora_boot.raw` to `cust` partition
  - `fastboot flash cust images/fedora_boot.raw`
  - `fedora_boot.raw` - partition image with kernels, deploymets, bls
  - `cust` - partition that miui uses for region-specific configuration and preloads
- Flash `fedora_rootfs.raw` to `userdata` partition, this will wipe your android data
  - `fastboot flash  userdata images/fedora_rootfs.raw`
  - `fedora_rootfs.raw` - fedora root partition image
  - `userdata` - partition used by android to store your data

### Rebasing to other desktops

- Rebasing is a best way to try a new desktop
- Before rebasing you should run `rpm-ostree reset`
- `sudo bootc switch quay.io/pocketblue/xiaomi-nabu-gnome-desktop:42` - recommended image for xiaomi pad 5
- `sudo bootc switch quay.io/pocketblue/xiaomi-nabu-gnome-mobile:42`
- `sudo bootc switch quay.io/pocketblue/xiaomi-nabu-plasma-desktop:42`
- `sudo bootc switch quay.io/pocketblue/xiaomi-nabu-plasma-mobile:42`
- `sudo bootc switch quay.io/pocketblue/xiaomi-nabu-phosh:42`

### Known bugs

- Sound is cracking sometimes, it can be fixed after rebooting device, or by using headphones
- Feel free to open issue and report any other bugs you find

### Uninstall fedora and get stock rom back

- Download `MIUI 14.0.8.0.TKXMIXM` archive [from here](https://miuirom.org/tablets/xiaomi-pad-5)
- Unarchive it
- Restore original partition table: `fastboot flash partition:0 images/gpt_both0.bin`
- Run `bash flash_all.sh`
- Reboot and enjoy stock rom

### Files used by the installation script, license info, source links

- `root.raw` - root partition for fedora, built by `.github/workflows/images.yml`
- `boot.raw` - /boot partition, built by `.github/workflows/images.yml`
- `efi.raw` - /boot/efi partition, built by `.github/workflows/images.yml`
- `uboot.img` - u-boot image, gpl2 license, [source](https://gitlab.com/sm8150-mainline/u-boot/-/jobs?kind=BUILD)
- `twrp.img` - recovery, gpl3 license, [source](https://github.com/ArKT-7/twrp_device_xiaomi_nabu)
- `dtbo.img` - device tree blob overlay image from lineage os, gpl2 or bsd‑2‑clause license, [source](https://github.com/ArKT-7/automated-nabu-lineage-installer)
- `vbmeta-disabled.img` - generated by `avbtool make_vbmeta_image --flags 2 --padding_size 4096 --output vbmeta-disabled.img` command
- `parted` - gnu parted arm64 static binary, gpl3 license, [source](https://github.com/pocketblue/parted-static)
- `sgdisk` - sgdisk arm64 static binary, gpl2 license, [source](https://github.com/pocketblue/sgdisk-static)

### Enabled copr repositories

- `pocketblue/common` - [copr](https://copr.fedorainfracloud.org/coprs/pocketblue/common) / [github](https://github.com/pocketblue/common-rpms)
- `pocketblue/sm8150` - [copr](https://copr.fedorainfracloud.org/coprs/pocketblue/sm8150) / [github](https://github.com/pocketblue/sm8150-rpms)
- `@mobility/gnome-mobile` - [copr](https://copr.fedorainfracloud.org/coprs/g/mobility/gnome-mobile)
- [kernel source code](https://gitlab.com/sm8150-mainline/linux)
